{% assign description = page.excerpt | newline_to_br | strip_newlines | replace: '<br />', ' ' | strip_html | strip | truncatewords: 30 %}    

<head>
    <meta charset="utf-8">

    <!-- General Metadata -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="{% if page.excerpt %}{{ description }}{% else %}{{ site.description }}{% endif %}">
    <meta name="author" content="{% if page.author %}{{ page.author}}{% else %}{{ site.author }}{% endif %}">

    <!-- Twitter Card data -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@wpforms">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}">
    <meta name="twitter:description" content="{% if page.excerpt %}{{ description }}{% else %}{{ site.description }}{% endif %}">
    <meta name="twitter:creator" content="@wpforms">
    <meta name="twitter:image" content="{{ site.baseurl }}/{{ page.header-img }}g">

    <!-- Open Graph data -->
    <meta property="og:type" content="{% if page.layout == "post" %}article{% else %}website{% endif %}">
    <meta property="og:title" content="{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}">
    <meta property="og:locale" content="en_US">
    <meta property="og:description" content="{% if page.excerpt %}{{ description }}{% else %}{{ site.description }}{% endif %}">
    <meta property="og:url" content="{{ page.url | replace:'index.html','' | prepend: site.baseurl | prepend: site.url }}">
    <meta property="og:image" content="{{ site.baseurl | prepend: site.url }}/{{ page.header-img }}">
    <meta property="og:site_name" content="{{ site.title }}">
    {% if page.layout == "post" %}<meta property="og:type" content="article">
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
    {% if page.modified-date %}<meta property="article:modified_time" content="{{ page.modified-date | date_to_xmlschema }}">{% endif %}
    <meta property="article:author" content="{% if page.author %}{{ page.author}}{% else %}{{ site.author }}{% endif %}">
    {% if page.category %}<meta property="article:section" content="{{ page.category }}">{% endif %}
    {% if page.tags %}<meta property="article:tag" content="{{ page.tags }}">{% endif %}{% endif %}

    <!-- Apple touch -->
    <meta name="apple-mobile-web-app-title" content="Lightningspirit's Blog">
    <meta name="application-name" content="Lightningspirit's Blog">
    <meta name="msapplication-config" content="/assets/icons/browserconfig.xml">
    <meta name="theme-color" content="#ffffff">

    <title>{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}</title>

    <link rel="canonical" href="{{ page.url | replace:'index.html','' | prepend: site.baseurl }}">
    {% if page.shortlink %}<link rel="shortlink" type="text/html" href="{{ page.shortlink }}">{% endif %}

    <link type="application/json" rel="alternate" href="{{ site.baseurl }}/feed.json" title="{{ site.title }}">
    <link type="application/atom+xml" rel="alternate" href="{{ site.baseurl }}/feed.xml" title="{{ site.title }}">

    {% if page.layout == "post" %}{% include critical-css-post.html %}{% else %}{% include critical-css-index.html %}{% endif %}

    <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/icons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/icons/favicon-16x16.png">
    <link rel="manifest" href="/assets/icons/manifest.json">
    <link rel="mask-icon" href="/assets/icons/safari-pinned-tab.svg" color="#6b6b6b">
    <link rel="shortcut icon" href="/assets/icons/favicon.ico">

    <script type="application/ld+json">
    {
        "@context": "http://schema.org/",
        {% if page.layout == "post" %}{% if page.technology-level %}"@type": "TechArticle",
        "proficiencyLevel": "{% if page.technology-level == 'expert' %}Expert{% else %}Beginner{% endif %}",
        {% else %}"@type": "Article",{% endif %}
        {% else %}"@type": "WebSite",{% endif %}
        "name": "{% if page.title %}{{ page.title }} - {{ site.title }}{% else %}{{ site.title }}{% endif %}",
        "image": "{{ site.baseurl | prepend: site.url }}/{{ page.header-img }}",
        "description": "{% if page.excerpt %}{{ page.excerpt | strip_html }}{% else %}{{ site.description }}{% endif %}.",
        "brand": {
            "@type": "Thing",
            "name": "Lightningspirit's Blog"
        }
    }
    </script>
</head>
